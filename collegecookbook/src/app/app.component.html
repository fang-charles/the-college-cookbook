<body>
  <app-header></app-header>

  <div class="container">
     <form #orderForm="ngForm" (ngSubmit)="onSubmit(orderForm.value)">
      <div class="form-group">
        <label>Search for your favorite recipe: </label>
        <input
          type="text"
          class="form-control"
          name="searchTerm"
          required
          #name="ngModel"
          [class.is-invalid]="name.invalid && name.touched"
          [(ngModel)]="orderModel.searchTerm"
        />
        <small class="text-danger" [class.d-none]="name.valid || name.untouched"
          >You must enter a search term</small
        >
      </div>

      <button
        class="btn btn-primary"
        (click)="confirmOrder(orderForm.value)"
        title="always enabled"
      >
        Search
      </button>

      &nbsp;&nbsp;&nbsp;&nbsp;

      <!--  <button type="submit" class="btn btn-success"
           [disabled]="!orderForm.form.valid"
           title="enabled once the form is valid">Submit</button>
 -->
    </form>

    <hr />

    <h3>Order Confirmation</h3>
    Confirm:
    <font color="green" style="font-style: italic;">
      <!-- If confirm_msg is not empty, display confirm message, otherwise, display default text -->
      {{
        confirm_msg.length > 0
          ? confirm_msg
          : "Display your confirmation message"
      }}</font
    >
    <br />
    Data submitted:
    <font color="green" style="font-style: italic;">
      <!-- If confirm_msg is not empty, display form data that was submitted. -->
      <!-- We don't check the size of data_submitted here since we want to avoid error
          when the page is loaded and form has not been submitted (and data_submitted is an object -- json data).
          Also, we designed our program to set confirm_msg only after the button has been clicked
          (i.e., the form has been submitted). Thus, we can make use of confirm_msg here. -->
      {{
        confirm_msg.length > 0
          ? (data_submitted | json)
          : "Display the submitted order"
      }}
    </font>
    <br />
    <hr />

    Response from PHP:<br />
    <font color="green" style="font-style: italic;">
      <!-- If confirm_msg is not empty, display the response from the PHP backend. -->
      {{
        confirm_msg.length > 0
          ? (responsedata | json)
          : "Display response from PHP backend"
      }}
    </font>
    <hr />
  </div>

  <!-- Recipe NgFor Test-->
    <div class="album py-5 bg-light">
      <div class="container">
        <div class="row">
          <ng-container *ngFor="let recipe of recipeArray">
          <div class="col-md-6">
            <div class="card mb-6 box-shadow">
              <div class="card-body">
                <!-- This was a deliberate design choice. See Steps for better solution-->
                <h5 class="card-title">{{recipe.recipeName}}</h5>
                <div class="card-text" [ngSwitch] =[recipe.numIngredients]>
                  <div *ngSwitchCase=1>Ingredients: {{ recipe.ingredient1}}</div>
                  <div *ngSwitchCase=2>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}</div>
                  <div *ngSwitchCase=3>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}</div>
                  <div *ngSwitchCase=4>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} </div>
                  <div *ngSwitchCase=5>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}</div>
                  <div *ngSwitchCase=6>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}, {{ recipe.ingredient6 }}</div>
                  <div *ngSwitchCase=7>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}, {{ recipe.ingredient6 }}, {{ recipe.ingredient7 }}</div>
                  <div *ngSwitchCase=8>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}, {{ recipe.ingredient6 }}, {{ recipe.ingredient7 }} , {{ recipe.ingredient8 }}</div>
                  <div *ngSwitchCase=9>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}, {{ recipe.ingredient6 }}, {{ recipe.ingredient7 }} , {{ recipe.ingredient8 }}, {{ recipe.ingredient9 }} </div>
                  <div *ngSwitchCase=10>Ingredients: {{ recipe.ingredient1 }}, {{ recipe.ingredient2 }}, {{ recipe.ingredient3 }}, {{ recipe.ingredient4 }} , {{ recipe.ingredient5 }}, {{ recipe.ingredient6 }}, {{ recipe.ingredient7 }} , {{ recipe.ingredient8 }}, {{ recipe.ingredient9 }} , {{ recipe.ingredient10 }}</div>
                  <div *ngSwitchDefault>Error: Default case reached</div>
                  </div>
                <p class="card-text">Steps:</p>
                <span [innerHTML]="recipe.getSteps()"></span>


                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary"
                    >
                      View
                    </button>
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary"
                    >
                      Favorite
                    </button>
                  </div>
                  <small class="text-muted">9 mins</small>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>

  <br /><br /><br />



  <app-footer></app-footer>
</body>
